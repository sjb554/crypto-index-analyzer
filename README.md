# Crypto Index Analyzer

Python-based toolkit that ranks the leading cryptocurrencies each week using a composite score that blends market strength, liquidity trends, risk, developer traction, and on-chain fundamentals. The project is designed to run unattended via GitHub Actions, producing an updated Markdown report that highlights the 5 to 10 most investable assets.

## Key Features
- Tracks the top 40 cryptocurrencies by market capitalisation using the CoinGecko API (optional key supported via `COINGECKO_API_KEY`).
- Builds 30 day market-cap growth, trading volume trend, and daily-return volatility metrics for each coin.
- Pulls GitHub repository telemetry (recent commits, stars, forks, watchers, open issues) to proxy developer activity.
- Derives on-chain strength from circulating versus maximum supply data and total value locked where provided.
- Publishes a public dashboard via GitHub Pages (https://sjb554.github.io/crypto-index-analyzer/).
- Ships with a scheduled GitHub Actions workflow (`.github/workflows/update.yml`) that regenerates and commits the report every Monday.

## Project Layout
- `config.yaml` - metric weights and runtime settings.
- `requirements.txt` - Python dependencies.
- `reports/crypto_index.md` - Markdown report (auto-generated by the analyser).
- `reports/crypto_index.json` - machine-readable snapshot of the latest run.
- `reports/crypto_index_history.csv` - historical composite scores for the top cohort.
- `docs/` - GitHub Pages dashboard (`index.html` plus supporting assets/data).
- `src/crypto_index_analyzer/` - source package containing configuration loading, data collection, scoring, reporting, dashboard utilities, and the CLI entry point.
- `.github/workflows/update.yml` - weekly GitHub Actions pipeline that regenerates the report and pushes changes.

## Usage & Configuration

### Live Dashboard
- Enable GitHub Pages for this repository using the **main** branch and the `docs/` folder.
- Once enabled, the dashboard is reachable at https://sjb554.github.io/crypto-index-analyzer/ (updated automatically after each successful workflow run).

### Automated Updates (GitHub Actions)
The repository ships with a scheduled workflow that runs every Monday at 12:00 UTC. It checks out the code, installs dependencies, executes the analyser, refreshes the `reports/` and `docs/` artifacts, and commits whenever rankings change. Add repository secrets for `COINGECKO_API_KEY` (optional, for higher rate limits) and rely on the built-in `GITHUB_TOKEN` or your own PAT so the workflow can authenticate with CoinGecko and push back to GitHub.

### Manual Refresh via CLI
Run the pipeline locally from the repo root:
```powershell
$env:PYTHONPATH = 'src'
python -m crypto_index_analyzer.run --config config.yaml --output reports/crypto_index.md
```
Add `--force` if you need to rebuild artifacts even when rankings are unchanged. The command uses the same configuration file as the workflow, keeping local dry-runs and automation in sync.

### Default Behaviour & Rate Limits
By default the analyser pulls the top 40 assets from CoinGecko's free tier. Requests are throttled with a 2-3 second delay per coin so full executions finish in a few minutes without exceeding public rate limits.

### Customising `config.yaml`
Tune the index by editing `config.yaml`:
- `weights` - adjust the weighting of market, liquidity, risk, developer, and on-chain signals (must sum to 1.0).
- `settings.top_n` - number of assets highlighted in the final report (recommend 5-10).
- `settings.coins_limit` - number of coins fetched from CoinGecko (keep <=40 for the free tier).
- `settings.days_for_trend` - window (days) used for volume and volatility calculations.

### Optional: Paid API Key for Faster Refreshes
If you have a CoinGecko Pro key, store it in the `COINGECKO_API_KEY` secret (or export it locally) and consider bumping `settings.coins_limit` or reducing the per-coin delay inside `src/crypto_index_analyzer/data_sources.py` to speed up runs.

## How It Works

### Data sources and metrics
- CoinGecko provides market-cap history, price series, 24h volume, and circulating/total supply to derive market-cap growth, volume trend, and on-chain scores.
- GitHub's REST API supplies repository telemetry (recent commits, stars, forks, watchers, open issues) for developer activity scoring.
- On-chain readiness blends circulating-to-total supply ratios with total value locked when available.

### Weighting and composite scoring
- Metrics are normalised across the analysed cohort (volatility is inversed so lower volatility is rewarded).
- Weights are defined in `config.yaml` and must sum to 1.0; tweaking them shifts the emphasis between fundamentals, liquidity, risk, and community health.
- Composite scores (0-100) determine rankings, and the top N assets drive the Markdown report, JSON snapshot, and dashboard content.

### Automation cadence
- The GitHub Action runs weekly (cron `0 12 * * 1`) and can be triggered manually.
- The CLI skips artifact updates (and the workflow skips commits) when the ranked top list is unchanged, keeping the history lean.
- When rankings change, the workflow updates `reports/crypto_index.md`, `reports/crypto_index.json`, `reports/crypto_index_history.csv`, the dashboard HTML, and the trend chart image in `docs/assets/`.

## Troubleshooting
- **CoinGecko 429 rate limit** - wait a few minutes or supply a paid API key via `COINGECKO_API_KEY`.
- **GitHub API limits** - the built-in `GITHUB_TOKEN` normally suffices; provide a personal access token if you observe 403 responses.
- **Empty report** - ensure the APIs are reachable and that `settings.coins_limit` is not lower than `settings.top_n`.

## Next Steps
- Experiment with alternative metric weights to emphasise development activity, liquidity, or stability.
- Add new data sources (on-chain analytics, sentiment feeds) and extend the scoring model.
- Archive weekly reports to visualise trends or publish the index externally.

## License
This project is delivered without a specific licence; add one if redistribution is required.
